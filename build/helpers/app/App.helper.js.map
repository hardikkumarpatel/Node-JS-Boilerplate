{"version":3,"file":"App.helper.js","names":["_nodeHttp","_interopRequireDefault","require","_config","_","e","__esModule","default","asyncGeneratorStep","n","t","r","o","a","c","i","u","value","done","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","AppHelper","serverErrorListening","error","syscall","code","Log","info","process","exit","concat","Config","get","IConfig","PORT","serverListening","server","HTTP","Server","address","port","signalListening","http","on","close","SIGINTError","Error","kill","pid","UncaughtError","_ref2","UncaughtReason","_x","validate","NODE_ENV","_default","exports"],"sources":["../../../src/helpers/app/App.helper.js"],"sourcesContent":["import HTTP from \"node:http\";\nimport { Config, IConfig } from \"@/config\";\nimport { Log } from \"@/helpers\";\n\nclass AppHelper {\n  static async serverErrorListening(error) {\n    if (error?.syscall !== \"listen\") {\n      throw error;\n    }\n\n    switch (error?.code) {\n      case \"EACCES\":\n        Log.info(\"Requires privileges\");\n        return process.exit(1);\n\n      case \"EADDRINUSE\":\n        Log.error(`port ${Config.get(IConfig.PORT)} is already in use`);\n        return process.exit(1);\n\n      default:\n        throw error;\n    }\n  }\n\n  static async serverListening(server) {\n    if (server instanceof HTTP.Server) {\n      const address = server.address();\n      Log.info(`Express engine is running on ${address.port} ðŸš€`);\n    }\n  }\n\n  static signalListening(http) {\n    process\n      .on(\"SIGINT\", async () => {\n        try {\n          if (http instanceof HTTP.Server) {\n            http.close();\n          }\n        } catch (SIGINTError) {\n          if (SIGINTError instanceof Error) {\n            Log.error(`Error occurred during shutdown server`, SIGINTError);\n          }\n        } finally {\n          Log.info(`Express engine shutdown successfully ðŸŒ±`);\n          process.exit(1);\n        }\n      })\n      .on(\"SIGHUP\", () => {\n        process.kill(process.pid, \"SIGTERM\");\n      })\n      .on(\"uncaughtException\", (UncaughtError) => {\n        Log.error(`Uncaught Exception thrown`, UncaughtError);\n        if (http instanceof HTTP.Server) {\n          http.close();\n        }\n        process.exit(1);\n      })\n      .on(\"unhandledRejection\", async (UncaughtReason) => {\n        Log.error(`Unhandled Rejection thrown`, UncaughtReason);\n        if (http instanceof HTTP.Server) {\n          http.close();\n        }\n        process.exit(1);\n      });\n  }\n\n  static async validate() {\n    if (!Config.get(IConfig.PORT) || !Config.get(IConfig.NODE_ENV)) {\n      Log.error(\n        \"The node env or PORT mapping is missing! Please check the .env file for the correct mapping.\"\n      );\n      Log.error(\"x-----------------------------------------------x\");\n      Log.error(\"x==================== ERROR ====================x\");\n      Log.error(\"x-----------------------------------------------x\");\n      return false;\n    }\n    return true;\n  }\n}\n\nexport default AppHelper;\n"],"mappings":"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","ignoreList":[]}